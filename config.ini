;for multiple vhosts: make sure your logs are written in seperate files with a clear indication of the tld in the filename
;then make one configfile per vhost, and start the logparser with the -config string
[general]
;this is the path where the sqlite database will be stored.
;full path, can be relative to where the logparser is executed, but usually a complete path is better
dbpath = "./demologs/mydb.db"

;format used to parse the timestamp in the logs. More info: https://www.practical-go-lessons.com/post/how-to-format-time-with-golang-ccc5ja83ibmc70m98260
timeformat = "02/Jan/2006:15:04:05 -0700"

;NOT used for splitting vhost logs (see above)!!! just here to identify referrers coming from your own domain!!!
;just a tld, no https, no slashes
mydomain = "merel.mobi"

;write a logs.html file to the output directory?
;true or false (true write the log, false doesn't write te log), no quotes
writelog = true

[input]
;where do i find the logs generated by your webserver?
;full path WITH trailing slash!!! path can be relative to where logparser is executed, but full path is preferred
logfilepath = "./demologs/"

;go regex to select which files to parse. Make sure you skip the logfiles, and the files are either ascii text or gz files (other formats not yet supported)
;tutorial: https://yourbasic.org/golang/regexp-cheat-sheet/
logfileregex = "^merel\.mobi\.acces.*"

;the regex to match your log format. Can either be the actual grouped regex, or a shortcode
;here's an example of an actual regex for a log in combined log format: (?m)^(\S*).*\[(.*)\]\s"(\S*)\s(\S*)\s([^"]*)"\s(\S*)\s(\S*)\s"([^"]*)"\s"([^"]*)"$
;currently only combined log format has a shortcode: "clf"
parseregex = "clf"

;if you enter your own regex with own groups, i need to be able to get the necessary info from the lines i parse. 
;the following config (starting with parserfield_ indicates which group in the parseregex contains which data. 
;the defaults are for clf
parserfield_ip = 1
parserfield_datetime = 2
parserfield_method = 3
parserfield_request = 4
parserfield_httpversion = 5
parserfield_returncode = 6
parserfield_httpsize = 7
parserfield_referrer = 8
parserfield_useragent = 9

[output]
;where do you want me to drop the output files. 
;usually it's a good idear to run the apachelogparser as the owner of the apache process (www-data, apache,...) and put the output somewhere in your web root
;IF you set the "emptyoutputpath", the html files will be cleaned from this directory, but you're safe to put an .htaccess file in there for password protection (or any other type of file or protection for what i care... just don't put html files in the output dir if you want to keep them...)
;full path WITH trailing slash preferred, relative path WITH trailing slash accepted
outputpath = "./output/"

;if set to true, the html files in the outputpath will be removed at the start of a new run, if set to false the script will overwrite the existing files, but won't touch any other html files
emptyoutputpath = true

;some stats only show a subset of days to keep graphs clear and filesizes small. This parameter tells the script in how many days you're interested
;setting this setting to less than 28 days might result in getting less comparative information, setting it to more than 180 might result in illegible graphs and large tables (depending on the amount of logs you have)
number_of_days_detailed = 31

;by default, go-echart's assets are pulled from the web... If you want extra security or run on an intranet, download the assets and serve them locally by changing the go-echarts.github.io path to the intranet path where you serve the assets
assethost = "https://go-echarts.github.io/go-echarts-assets/assets/"

;if you're not dropping the output in a webroot, it might be a good idear to let the script generate an easy to download zipfile containing all the output. This way you can easily fetch the zip to your local system, unpack it, and view it as a local file (open the index.html)
;options are true (create a zip) or false (don't create a zip)
zipoutput = false

;if zipoutput = true, this parameter tells the script where exactly it needs to put the zipfile AND it's name
;a full path, including the actual zip filename is preferred, a relative path is allowed
zippath = ./output.zip

;the stat about referrers shows a maximum number of referrers only as to keep the resulting table relative small... If you want to see more referrers, just increase this number... It's all ascii anyways, even a large number won't hurt you that much ;)
numberofreferrers = 30

[ignorevisitorips]
;visitors having these ip's won't be loaded into the database. Use this to blacklist your own ips, or the ip's from hackers or bots you do not want to include in your statistics. Once they're ignored and the apachelogparser is run in logparsing mode, it's pretty hard to get ignored visits back into the database!
;the format is pretty simple: free_text_reminder_for_you = "the ip you want to ignore"
;each line is a new ip you want to ignore, the key value is just free text, avoid special characters and spaces tough!
myownip = "127.0.0.1"

[ignorehostagents]
;visitors having these host agents won't be loaded into the database. Use this to blacklist search engine crawlers, spiders, bots or the host agents from hackers or bots you do not want to include in your statistics. Once they're ignored and the apachelogparser is run in logparsing mode, it's pretty hard to get ignored visits back into the database!
;the format is pretty simple: free_text_reminder_for_you = "regex of the host agent you want to ignore"
;each line is a new host agent you want to ignore, the key value is just free text, avoid special characters and spaces tough!
google = "(?i)google"
bing = "(?i)bing"
yandex = "(?i)yandex"
bots = "(?i)bot"
wordpress = "(?i)wordpress"
wget = "(?i)wget"
spider = "(?i)spider"
java = "(?i)java"

[ignorereferrers]
;visitors having these referrers won't be loaded into the database. Use this to blacklist any referrer you're not interested in. Once they're ignored and the apachelogparser is run in logparsing mode, it's pretty hard to get ignored visits back into the database!
;the format is pretty simple: free_text_reminder_for_you = "regex of the referrer you want to ignore"
;each line is a new referrer you want to ignore, the key value is just free text, avoid special characters and spaces tough!
me = "(?i)localhost"

[ignoredrequests]
;visitors having these requests won't be loaded into the database. Use this to blacklist any request you're not interested in, like robots.txt, images, movies, css, javascript, requests coming from your wordpress admin pages,.... Once they're ignored and the apachelogparser is run in logparsing mode, it's pretty hard to get ignored visits back into the database!
;the format is pretty simple: free_text_reminder_for_you = "regex of the request you want to ignore"
;each line is a new request you want to ignore, the key value is just free text, avoid special characters and spaces tough!
robots = ".*robots\.txt$"
img_png = "\.png$"
img_jpg = "\.jpg$"
img_gif = "\.gif$"
json = "\.json$" 
java = "\js$"
css = "\.css$"
wp = "wp-"

[stat_perhour_hits_raw_2xx_3xx]
;function that's being used: noaggregation_nbdaysdetailed_raw_2xx_3xx
;this stat shows the raw hits per hour over the last number_of_days_detailed days (number_of_days_detailed is a configurable parameter in this ini file)
;run this stat? true/false
enabled = true

;as an output, create a table? true/false
table_enabled = true

;what's the title you want to give to the table
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
table_title = "Number of raw 2xx and 3xx hits per hour over th last |number_of_days_detailed| days"

;text on top of the table 
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
table_description = "Count of all raw succesfull hits (filtering out all 4xx and 5xx return codes)."

;the page content in the html file, separate paragraphs with the pipe symbol (|)
table_pagecontent = "We limit the output to the number of days that were defined in your config.ini file with a sliding window (so if you run this tool at 15:34 you'll get stats untill 15:34 x days ago)."

;the footer text
table_pagefooter = "only hits that were actually loaded are shown, so if you filtered out certain lines in your config.ini they'll never be shown!"

;the filename of the html file containing the table
table_filename = "noaggregation_nbdaysdetailed_raw_2xx_3xx_table.html"

;the text on the link on the indexpage to link to this table
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
table_index_name = "table of the raw 2xx and 3xx per hour over the last |number_of_days_detailed| days"

;the group on the index this table belongs to
table_index_group = "hits"

;the order this table has to be shown in in the index
table_index_order = 15

;as an output, create a linegraph? true/false
linegraph_enabled = true

;the title of the linegraph, used on top of the html AND on the index
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
linegraph_title = "table of the raw 2xx and 3xx per hour over the last |number_of_days_detailed| days"

;text on top of the linegraph 
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
linegraph_description = "Count of all raw succesfull hits (filtering out all 4xx and 5xx return codes)."

;the filename of the html file containing the linegraph
linegraph_filename = "noaggregation_nbdaysdetailed_raw_2xx_3xx_linegraph.html"

;the group on the index this table belongs to
linegraph_index_group = "hits"

;the order this table has to be shown in in the index
linegraph_index_order = 15

[stat_perday_hits_raw_2xx_3xx]
;function that's being used: noaggregation_nbdaysdetailed_rawperday_2xx_3xx
;this stat shows the raw hits per day over the last number_of_days_detailed days (number_of_days_detailed is a configurable parameter in this ini file)
;run this stat? true/false
enabled = true

;as an output, create a table? true/false
table_enabled = true

;what's the title you want to give to the table
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
table_title = "Number of raw 2xx and 3xx hits per day over the last |number_of_days_detailed| days"

;text on top of the table 
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
table_description = "Count of all raw succesfull hits (filtering out all 4xx and 5xx return codes)."

;the page content in the html file, separate paragraphs with the pipe symbol (|)
table_pagecontent = "We limit the output to the number of days that were defined in your config.ini file with a sliding window (so if you run this tool at 15:34 you'll get stats untill 15:34 x days ago)."

;the footer text
table_pagefooter = "only hits that were actually loaded are shown, so if you filtered out certain lines in your config.ini they'll never be shown!"

;the filename of the html file containing the table
table_filename = "noaggregation_nbdaysdetailed_rawperday_2xx_3xx_table.html"

;the text on the link on the indexpage to link to this table
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
table_index_name = "table of the raw 2xx and 3xx per day over the last |number_of_days_detailed| days"

;the group on the index this table belongs to
table_index_group = "hits"

;the order this table has to be shown in in the index
table_index_order = 15

;as an output, create a linegraph? true/false
linegraph_enabled = true

;the title of the linegraph, used on top of the html AND on the index
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
linegraph_title = "table of the raw 2xx and 3xx per day over the last |number_of_days_detailed| days"

;text on top of the linegraph 
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
linegraph_description = "Count of all raw succesfull hits (filtering out all 4xx and 5xx return codes)."

;the filename of the html file containing the linegraph
linegraph_filename = "noaggregation_nbdaysdetailed_rawperday_2xx_3xx_linegraph.html"

;the group on the index this table belongs to
linegraph_index_group = "hits"

;the order this table has to be shown in in the index
linegraph_index_order = 15

[stat_perhour_hits_unique_2xx_3xx]
;function that's being used: noaggregation_nbdaysdetailed_unique_2xx_3xx
;this stat shows the unique hits per hour over the last number_of_days_detailed days (number_of_days_detailed is a configurable parameter in this ini file)
;run this stat? true/false
enabled = true

;as an output, create a table? true/false
table_enabled = true

;what's the title you want to give to the table
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
table_title = "Number of unique 2xx and 3xx hits per hour over the last |number_of_days_detailed| days"

;text on top of the table 
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
table_description = "Count of all unique succesfull hits (filtering out all 4xx and 5xx return codes)."

;the page content in the html file, separate paragraphs with the pipe symbol (|)
table_pagecontent = "A unique hit = the first time this hour one use generates a hit.|We limit the output to the number of days that were defined in your config.ini file with a sliding window (so if you run this tool at 15:34 you'll get stats untill 15:34 x days ago)."

;the footer text
table_pagefooter = "only hits that were actually loaded are shown, so if you filtered out certain lines in your config.ini they'll never be shown!"

;the filename of the html file containing the table
table_filename = "noaggregation_nbdaysdetailed_unique_2xx_3xx_table.html"

;the text on the link on the indexpage to link to this table
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
table_index_name = "table of the unique 2xx and 3xx per hour over the last |number_of_days_detailed| days"

;the group on the index this table belongs to
table_index_group = "hits"

;the order this table has to be shown in in the index
table_index_order = 15

;as an output, create a linegraph? true/false
linegraph_enabled = true

;the title of the linegraph, used on top of the html AND on the index
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
linegraph_title = "table of the unique 2xx and 3xx per hour over the last |number_of_days_detailed| days"

;text on top of the linegraph 
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
linegraph_description = "Count of all unique succesfull hits (filtering out all 4xx and 5xx return codes)."

;the filename of the html file containing the linegraph
linegraph_filename = "noaggregation_nbdaysdetailed_unique_2xx_3xx_linegraph.html"

;the group on the index this table belongs to
linegraph_index_group = "hits"

;the order this table has to be shown in in the index
linegraph_index_order = 15

[stat_perday_hits_unique_2xx_3xx]
;function that's being used: noaggregation_nbdaysdetailed_uniqueperday_2xx_3xx
;this stat shows the unique hits per day over the last number_of_days_detailed days (number_of_days_detailed is a configurable parameter in this ini file)
;run this stat? true/false
enabled = true

;as an output, create a table? true/false
table_enabled = true

;what's the title you want to give to the table
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
table_title = "Number of unique 2xx and 3xx hits per day over the last |number_of_days_detailed| days"

;text on top of the table 
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
table_description = "Count of all unique succesfull hits (filtering out all 4xx and 5xx return codes)."

;the page content in the html file, separate paragraphs with the pipe symbol (|)
table_pagecontent = "Unique hit = the first hit of one user this day|We limit the output to the number of days that were defined in your config.ini file with a sliding window (so if you run this tool at 15:34 you'll get stats untill 15:34 x days ago)."

;the footer text
table_pagefooter = "only hits that were actually loaded are shown, so if you filtered out certain lines in your config.ini they'll never be shown!"

;the filename of the html file containing the table
table_filename = "noaggregation_nbdaysdetailed_uniqueperday_2xx_3xx_table.html"

;the text on the link on the indexpage to link to this table
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
table_index_name = "table of the unique 2xx and 3xx per day over the last |number_of_days_detailed| days"

;the group on the index this table belongs to
table_index_group = "hits"

;the order this table has to be shown in in the index
table_index_order = 15

;as an output, create a linegraph? true/false
linegraph_enabled = true

;the title of the linegraph, used on top of the html AND on the index
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
linegraph_title = "table of the unique 2xx and 3xx per day over the last |number_of_days_detailed| days"

;text on top of the linegraph 
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
linegraph_description = "Count of all unique succesfull hits (filtering out all 4xx and 5xx return codes)."

;the filename of the html file containing the linegraph
linegraph_filename = "noaggregation_nbdaysdetailed_uniqueperday_2xx_3xx_linegraph.html"

;the group on the index this table belongs to
linegraph_index_group = "hits"

;the order this table has to be shown in in the index
linegraph_index_order = 15

[stat_perhour_referrers_raw_2xx_3xx]
;function that's being used: stats_noaggregation_nbdaysdetailed_refferers
;this stat shows the raw referrers per hour over the last number_of_days_detailed days (number_of_days_detailed is a configurable parameter in this ini file)
;run this stat? true/false
enabled = true

;as an output, create a table? true/false
table_enabled = true

;what's the title you want to give to the table
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
table_title = "Number of raw 2xx and 3xx referrers  over th last |number_of_days_detailed| days"

;text on top of the table 
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
table_description = "Count of all raw succesfull referrers (filtering out all 4xx and 5xx return codes)."

;the page content in the html file, separate paragraphs with the pipe symbol (|)
table_pagecontent = "We limit the output to the number of days that were defined in your config.ini file with a sliding window (so if you run this tool at 15:34 you'll get stats untill 15:34 x days ago)."

;the footer text
table_pagefooter = "only hits that were actually loaded are shown, so if you filtered out certain lines in your config.ini they'll never be shown!"

;the filename of the html file containing the table
table_filename = "noaggregation_nbdaysdetailed_rawreferrers_2xx_3xx_table.html"

;the text on the link on the indexpage to link to this table
;use |number_of_days_detailed| as a shortcode that will be replaced with the value of number_of_days_detailed
table_index_name = "table of the raw 2xx and 3xx referrers over the last |number_of_days_detailed| days"

;the group on the index this table belongs to
table_index_group = "referrers"

;the order this table has to be shown in in the index
table_index_order = 15